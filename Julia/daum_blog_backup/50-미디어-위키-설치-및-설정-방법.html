
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>미디어 위키 설치 및 설정 방법</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">미디어 위키 설치 및 설정 방법</h2>
                                <div class="box-info">
                                    <p class="category">리눅스/서버 앱 설정 방법</p>
                                    <p class="date">2016-09-27 20:30:09</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><span style="font-size: 11pt; color: rgb(255, 255, 255);">mediawiki 설치법</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	먼저 네 가지의 패키지를 aptitude를 이용하여 설치한다</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# aptitude update</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	만약 업그레이드를 하고 싶다면</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# aptitude upgrade</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">현재 리눅스의 버전에 따라 다른데, 우분투 14 이상에서는</span></p><p><br><span style="font-size: 11pt; color: rgb(255, 255, 255);"># aptitude install -y apache2 mysql-server php php-mysql libapache2-mod-php php-xml php-mbstring</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">우분투 13 이하에서 설치할 네가지의 패키지는 다음과 같다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	apache2 : 웹서비스를 해주는 앱이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	mysql-server : 널리 쓰이는 데이터베이스이다. 미디어위키의 데이터는 이 앱이 관리하게 된다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	php5 : 웹언어</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	php5-mysql</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이를 통틀어서 LAMP 라고 하는데,</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	Linux, Apache, MySQL, PHP 의 약자로 리눅스 서버 운영에 거의 필수적인 소프트웨어들을 나타내는 약자이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	보통 자동으로 설치가 되는데 안되어 있다면 추가할 패키지가 있다</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	libapache2-mod-php5</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	위 네가지 패키지를 설치한 뒤에 없으면 추가 시켜서 설치해준다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이제 미디어위키를 설치해보자. 미디어 위키는 공식적으로는 aptitude가 아닌 수동으로 설치하도록 되어있다. </span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	왜냐, aptitude 에 있는 버전은 지원이 중단된 매우 옛날 버전이기 때문.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	그 다음 MySQL의 보안설정을 설치한다</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# mysql_secure_installation</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	mysql은 이미 설치가 됐고, 보안 설정만 하는 작업이다. 원격 루트 접속을 허용하는게 관리에 편할 것이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	nolwiki의 mysql 비번은 root 이용자에 한해 연구실*2nol 이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	그 다음 미디어 위키를 다운 받자. 버전은 알아서 선택한다. 대신 최신 버전이 아니라면 보안 에러가 뜬다.</span></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;">이전 버전은 원래 서버에 나타나지 않기 때문.<br></span></font><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# cd ~</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# wge<span style="color: rgb(255, 255, 255);">t </span></span><span style="font-size: 11pt; color: rgb(255, 255, 255);"><a class="tx-link" target="_blank" href="https://releases.wikimedia.org/mediawiki/1.27/mediawiki-1.27.0.tar.gz&lt;br&gt;&lt;br&gt;"><span style="color: rgb(255, 255, 255);">https://releases.wikimedia.org/mediawiki/1.27/mediawiki-1.27.0.tar.gz</span></a></span></p><p><br></p><p><span style="color: rgb(255, 255, 255); font-size: 11pt;">만약&nbsp;</span><br></p><p><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	ERROR: The certificate of xxx.com' is not trusted.</span><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	ERROR: The certificate ofxxx.com' hasn't got a known issuer.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이런 자격 어쩌구 에러가 발생한 다면 wget command 에서 다음 옵션을 추가하자.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# wget --no-check-certificate </span><a class="tx-link" target="_blank" href="https://releases.wikimedia.org/mediawiki/1.27/mediawiki-1.27.0.tar.gz&lt;br&gt;&lt;br&gt;"><span style="font-size: 11pt; color: rgb(255, 255, 255);">https://releases.wikimedia.org/mediawiki/1.27/mediawiki-1.27.0.tar.gz</span><br><br></a><span style="font-size: 11pt; color: rgb(255, 255, 255);">	그리고 매번 --no-check-certificate 옵션을 쓸 수는 없으므로 다음 패키지를 같이 설치하면 이 문제가 사라진다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# aptitude install -y ca-certificates</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	여기서 이제 버전이 나뉜다. 우분투 버전 14 이상은 미디어 위키의 기본 디렉토리가 /var/lib/mediawiki 이지만</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	버전 14 밑으로는 기본 디렉토리가 /var/www/html 이다. 이는&nbsp;</span></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"># vi /etc/apache2/sites-available/000-default.conf 에서 수정할 수 있긴 하다.<br></span></font><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	nolftp의 우분투 버전은 13이므로 /var/www/html 에다 압축푼 폴더를 옮겨준다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# mv mediawiki-*/* /var/www/html/mediawiki</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	여기서 중요한건 /var/www/html/ 에 미디어위키 폴더가 반드시 mediawiki 라는 이름으로 들어가 있어야 한다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이름이 반드시 이래야지만 패키지가 제대로 작동한다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	그 다음 설정파일 수정</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# vi /etc/php5/apache2/php.ini</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	여기서 업로드 파일 용량, 수와 미디어위키의 메모리 사용량을 수정할 수 있다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		upload_max_filesize = 2M</span><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	</span><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		2M 를 원하는 용량으로 바꾸셈.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		memory_limit = 8M</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		이것도 128M 으로 바꾸는게 좋을듯.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		extension=msql.so</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		이 부분을 찾아 주석처리를 제거해준다. 주석 처리는 ;로 되어 있다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">		이는 php에서 mysql을 사용할 수 있도록 해주는 문장이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이런 에러가 뜨면</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# vi /etc/apache2/apache2.conf</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	로 들어가서 맨 밑에</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	ServerName localhost</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	를 추가해준다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이제 mediawiki에 접속해보자.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	윈도우컴에서 웹브라우저로</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	</span><a class="tx-link" target="_blank" href="http://아이피/mediawiki&lt;br&gt;"><span style="font-size: 11pt; color: rgb(255, 255, 255);">http://아이피/mediawiki</span><br></a><span style="font-size: 11pt; color: rgb(255, 255, 255);">	</span><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	접속을 했는데 만약 404 error 가 뜬다면 리눅스 서버에서 다음을 입력</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# cd /var/www/html</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# ln -s /var/lib/mediawiki mediawiki</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이제 윈도우컴에서 인터넷으로 미디어위키에 다시 접속하면 404 error가 안뜰 것이다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	초기 설정 과정의 마지막 부분에는 데이터베이스 셋팅란이 있다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이때 비밀번호를 설정할 때 MySQL에서 설정한 비밀번호를 입력한다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	그 다음 설정을 다 마치면 LocalSettings.php 라는 파일을 다운로드하게 된다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	이 폴더를 리눅스컴의 미디어위키 폴더로 옮겨주어야 한다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	미디어위키 폴더는 리눅스가 과거 버전이라면</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	/var/www/html/</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	최신 버전이라면</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	/var/lib/</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	에 들어 있다. ftp를 이용하든 뭘하든 하여간 옮기면 끝.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	testcluster의 mysql 비번은 zlffj1032@ 이다. 이건 근데 얼마든지 </span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	# mysql_secure_installation</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	를 이용하여 리눅스컴에서 바꿔줄 수 있다. 비번을 바꾸면 미디어위키의 데이터베이스 비번도 바꾸고 LocalSettings.php</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">	를 옮겨주어야 한다는 것을 명심.</span><br><br></p>
                        </div>
                        <br/>
                        <div class="tags">
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
