
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>ystat 코드 설명 및 적용법</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">ystat 코드 설명 및 적용법</h2>
                                <div class="box-info">
                                    <p class="category">리눅스/서버 앱 설정 방법</p>
                                    <p class="date">2016-09-27 13:35:11</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><span style="font-size: 11pt; color: rgb(255, 255, 255); font-family: Dotum;"><br></span></p><p><A href="https://t1.daumcdn.net/cfile/blog/262D294857E9F73F3A?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> dstat</a></p><p></p><p><A href="https://t1.daumcdn.net/cfile/blog/2268C54857E9F73F04?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> ystat</a></p><p></p><p><A href="https://t1.daumcdn.net/cfile/blog/2235C24857E9F73F33?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> ystat_daemon</a></p><p></p><p><A href="https://t1.daumcdn.net/cfile/blog/2637F44857E9F74030?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> ystat_daemon_exec.py</a></p><p></p><p><A href="https://t1.daumcdn.net/cfile/blog/2445584857E9F74026?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> ystat_daemon_kill.py</a></p><p></p><p><A href="https://t1.daumcdn.net/cfile/blog/22432E4857E9F7402A?download" target="_blank"><img src="//i1.daumcdn.net/icon/editor/p_etc_s.gif"/> ystat_root</a></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255); font-family: Dotum;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">각 노드들에는 ystat-daemon이라는 background 프로그램이 돌아가고 있다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 데몬은 각 시스템의 상태를 텍스트 파일로 기록한 다음 모든 노드들이 공유하고 있는</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">폴더에 저장한다. 그리고 서버는 이 파일을 모두 취합하여 종합적인 노드들의 프로세스 정보를</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">출력한다. 이것이 ystat 명령어이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">여태까지 노드들이 서버와 공유하는 파일은 있었어도, 모든 노드들끼리도 공유할 수 있었던</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">폴더는 없었다. 그것을 만들어줘야 한다.</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># chroot /nfsroot/cpunode</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># vi /etc/fstab</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">다음 항을 추가한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">192.168.100.1:/root</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">/root</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">nfs</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">defaults,async,nosuid,nodev,intr,nfsvers=3,rsize=32768,wsize=32768</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">0</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">0</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이제 서버의 /root 폴더를 모든 노드들의 /root에 마운트 시켰으므로,</span></p><p><span style="font-size: 10pt; color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">모든 노드는 부팅 서버와 같은&nbsp;</span><span style="color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">/root 폴더를 가지게 된다.</span></p><p><span style="color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">다시 말해, 노드의 /root에 들어가면 서버의 /root 가 보일 것이다.</span></p><p><span style="color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">여기에 노드들이 각 시스템의 정보를 업로드시키도록 데몬 프로그램을 만들 것이다.</span></p><p><br></p><p><span style="color: rgb(204, 204, 204);">명수형이 이 데몬 프로그램을 이미 만들어놨는데, 이름이 ystat_daemon 이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ystat_daemon은 파이썬코드로 쓰여진 백그라운드 프로그램이다.</span></p><p><span style="font-size: 10pt; color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이를 데몬 프로그램이라 한다. 마치 귀신(데몬) 처럼 보이지 않는 곳에서 일을 하기 때문에...</span></p><p><span style="font-size: 10pt; color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">파이썬으로 실행파일을 만들기 위해서는&nbsp;</span><span style="color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">psutil 이라는 파이썬 모듈이 필요하다.</span></p><p><span style="color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">그리고 그렇게 쓰여진 파이썬 코드가 명령어가 되기 위해서는 (ls, cd, mkdir 과 같은 명령어)</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">리눅스에 설치된 프로그램들을 실행시킬 수 있는 실행권한을 가져한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그 권한을 주는 명령어가 chmod(change mode) 이다. 먼저 간단한 test 파일을 만들어보자.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># vi /home/ldg/test</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">다음과 같이 입력한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">print "hello"</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">저장하고 실행시켜보자.</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># python test</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">hello</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">라고 뜰 것이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># ls -alph test</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">&gt;&gt; -rw-r--r-- 어쩌구저쩌구</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ls -alph는 상세 정보를 보여준다. 여기서 맨 첫째 칸은 d 나 - 이다.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">d : 디렉토리</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">- : 파일</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그다음은 rwxrwxrwx 순이다.&nbsp;</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이는 read write execute 의 약자로서, 소유자/그룹사용자/전체사용자 순으로</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">읽기,쓰기,실행 권한을 표기한 것이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">소유자 권한에 rw- 라 되어 있다면&nbsp;소유자(파일을 만든 사람)은 읽고 쓰기만 될 뿐,</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 파일로 다른 프로그램을 실행시킬 수 없다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">2진수로 표현했을때, rwx 권한을 주려면 111 이다. 이것은 10진수로 7이다.</span></p><p><span style="font-size: 10pt; font-family: Dotum, 돋움, sans-serif;">내가 소속한 그룹이나&nbsp;그룹외의 사용자들에게 r-x 권한을&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">주고 싶으면 101 이라고 해주면 되고</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">이것은 10진수로 5 이다. 따라서 chmod 명령어를 다음과 같이 내린다.</span><br></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">chmod 755 ./test</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">vi ls -alph test</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">-rwxr-xr-x 라고 바뀐 것을 볼 수 있을 것이다. 이제 이 파일을 소유하고 있는 '나' 뿐 아니라,</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">내가 속한 그룹의 다른 멤버들, 내가 속하지 않는 그룹의 멤버들까지 모두 이 파일을 읽을 수 있다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">또한 이 파일은 실행 되었을 시 리눅스 시스템 내의 다른 프로그램들을 실행시킬 수 있다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">즉 데몬 프로그램으로서, 알아서 시스템에서 여러 프로그램들을 실행해가며 스스로 일할 수 있다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이제 실행 권한이 있으니 굳이&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"># python test 라 하지 않고 # test 라고만 해도 파일이 실행될 수 있다. 이 파일은 시스템 내의 python 을 실행시킬 수 있으니까!</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># test</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">하지만 아무 것도 실행되지 않을 것이다. 왜냐면, 이 test는 자기가 python script 인지 모른다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그래서 한 줄을 더 추가해줘야한다. script 를 열자.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># vi test</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">맨 윗 줄에</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">#!/usr/bin/env python</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이것은 linux shell script로, 이 파일이 python script 임을 알려주는 줄이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">저장하고 나와서 다시 # test 를 해보자</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">오류는 안나는데 아무런 결과가 뜨지 않는다. 왜일까?</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이미 test라는 명령어가 존재하기 때문이다.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># whereis test</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">test: /usr/bin/test /usr/share/man/man1/test.1.gz</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">똑같은 이름의 파일이&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 13.3333px;">/usr/bin/test 과&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 13.3333px;">/usr/share/man/man1/test.1.gz 에 있다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">특히나 bin에 있다는 것은, 이미 명령어 중에 test 라는 명령어가 있다는 뜻.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">그래서 그냥 test를 실행하면 안되고</span><br></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">내가 실행하고 싶은 test 파일이 어디에 있는지 꼭 명시 해주어야 한다.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># ./test</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">hello world</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이제 성공적으로 실행파일을 만드는데 성공했다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그럼 이제 각 노드에서 실행될 ystat_daemon을 만들 준비가 된 것이다.</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ystat_daemon은 모든 노드에서 실행되고 있어야 한다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ystat_daemon은 각 시스템에서 프로세스 현황 정보를 모아 자신의 /root에&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">저장한다.</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">그런데 노드들의 /root는 서버의 /root에 마운트 되어 있으므로,</span><br></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">서버의 /root에 자신들의 정보를 저장하는 셈이 된다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그럼 ystat_daemon을 노드를 부팅시킬 때 자동으로 실행되도록 해야 편할 것이다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">시작프로그램으로 어떻게 등록시킬까?</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">리눅스는 /etc/init.d 폴더 안에 데몬프로그램 스크립트를 둔다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">데몬 프로그램들은 모두 쉘 스크립트로 짜여진 스크립트 파일이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">/etc/init.d 안의 파일들은 모두 일정한 형식을 따라 쉘 스크립트로만 짜여져 있어야 한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ystat_daemon은 파이썬코드이므로 /etc/init.d 안에 두어 봐야 실행되지 않는다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">다른 방법을 이용해 자동으로 부팅될 때 실행되도록 해야하는데,</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이는 부트 스크립트를 이용함으로써 해결할 수 있다.&nbsp;</span></p><p><br></p><p>아니 어짜피 이 파이썬 코드에 실행 권한도 줬고, 쉘 스크립트로 파이썬 스크립트라는 것도</p><p><br></p><p>설정해줬는데 /etc/init.d 에 넣어도 되지 않는가? 라고 물을 수 있다. 맞는 말이다.</p><p><br></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;">하지만 runlevel 이라 하여 /etc/init.d 안의 데몬프로그램들에게 실행 순서를 정해줘야하는데,</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;">이건 쉘 스크립트로 작성되어야 한다. 상당히 귀찮은 짓.</span></font></p><p><span style="font-size: 9pt;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그럼 어떤 방법을 사용할 수 있을까?</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">리</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">눅스는 부팅 과정의 맨 마지막에 /etc/rc.local 이라는 스크립트를 실행한다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 스크립트는 부팅 마지막에&nbsp;실행해야할 프로그램들을 명시하는 용도로 쓰인다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;">yhome3 의 /etc/rc.local 파일 내용을 여기에 적는다.</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"></span><br></font></p><hr style="display:block; border: black 0 none; border-top: black 1px solid; height: 1px"><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><span style="color: rgb(0, 216, 255);">#!/bin/sh -e</span><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># rc.local</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># This script is executed at the end of each multiuser runlevel.</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># Make sure that the script will "exit 0" &#111;&#110; success or any other</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># value &#111;&#110; error.</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># In order to enable or disable this script just change the execution</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># bits.</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);"># By default this script does nothing.</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">. /lib/lsb/init-functions</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "Mount and Export the home directory"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">/etc/yinit/mount_export.py</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "Automount the home directory(/homelocal-&gt;/home) by NFS"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">/etc/yinit/autofs.py</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#log_begin_msg "Activate the eth1 interface for external connection"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#/etc/yinit/activate_ext_net.py</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">#log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "ystat Monitoring DAEMON process starting..."</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">/usr/local/sbin/ystat_daemon</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "Turn &#111;&#110; the persistence mode for NVIDIA GPUs"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">/etc/yinit/nvidia_init.py</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "Set the eth0 interface to the WOL mode"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">ethtool -s eth0 wol g</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "Set the date and time via NTP"</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">ntpdate -s 192.168.100.1</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_begin_msg "All Booting sequences are ended. Starting Login Session..."</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">/etc/yinit/wait.py</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">log_end_msg $?</span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px;"><br></span></font></p><p><font face="Dotum, 돋움, sans-serif"><span style="font-size: 13.3333px; color: rgb(0, 216, 255);">exit 0</span></font></p><div><hr style="display:block; border: black 0 none; border-top: black 1px solid; height: 1px"><p></p></div><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">문법 그대로 따라서 ystat_daemon의 경로를 저장해두면 알아서 실행되겠지?</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(255, 187, 0); font-family: Dotum, 돋움, sans-serif;"><b>ystat_daemon 을 그럼 어느 디렉토리에 둘까?</b></span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">각 데이터서버(yhome1,2,3)&nbsp;및 노드에는 ystat_deamon 이 /usr/local/sbin/ 에 저장되어 있다</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(255, 0, 221); font-family: Dotum, 돋움, sans-serif;"><span style="color: rgb(204, 204, 204);">(yboot 에는 안들어있다</span><span style="color: rgb(204, 204, 204);">).</span></span></p><p><span style="font-size: 10pt; color: rgb(255, 0, 221); font-family: Dotum, 돋움, sans-serif;"><span style="color: rgb(204, 204, 204);"><br></span></span></p><p><span style="font-size: 10pt; color: rgb(255, 0, 221); font-family: Dotum, 돋움, sans-serif;"><span style="color: rgb(255, 0, 127);">여기서 /usr 폴더는 관리자/사용자를 구별할 때의 사용자를 말하는 것이 아니라,&nbsp;</span></span><span style="color: rgb(255, 0, 127); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">리눅스개발자/리눅스사용자 를 구별할 때의 사용자를 말한다는 것을 명심하자.&nbsp;</span><span style="color: rgb(255, 0, 127); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">즉 서버 관리자인 '나'도 이 땐 '사용자'의 범주에 들어서는 것이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 폴더는 명수형이 따로 만든 파일. /usr/local 은 리눅스에는 기본적으로 없는 폴더이다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">사용자가 시스템에 새로운 폴더를&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">추가해서 사용하려면 보통 /usr 폴더안에 만든다.</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">그래야 루트파일시스템을 건드릴 가능성을 줄일 수 있기 때문이다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 /usr 안에는 사용자들을 위한 명령어들이나 라이브러리 같은것이 저장되어 있다.&nbsp;</span></p><p><span style="color: rgb(255, 255, 255); font-size: 11pt;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;">가령 리눅스에서 사용자를 위한 기본 명령어 셋과 라이브러리가 있다.</span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;">이외에 사용자들이 임의로 설치한 패키지에서 딸려 오는 명령어들과</span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;">라이브러리 등이 여기에 들어간다.</span></p><p><span style="color: rgb(255, 255, 255); font-size: 11pt;"><br></span></p><p><span style="color: rgb(204, 204, 204); font-size: 10pt; font-family: Dotum, 돋움, sans-serif;">리눅스의 bin 이나 sbin 폴더는 여러군데에 있다. 리눅스는 이 폴더를 전부 환경변수로 등록해둔다.</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">즉 이 안의 파일들은 모두 파일명 그대로 명령어로 쓸 수 있다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">/usr/bin 과 /usr/sbin 에 들어가보면, 사용자들이 쓸 수 있는 여러 명령어 프로그램들이 보인다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">우리는 이제 'ystat' 이라고 하는 새로운 시스템 명령어를 만들 것이다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(171, 242, 0); font-family: Dotum, 돋움, sans-serif;">'그럼 /usr/bin 과 /usr/sbin 에 ystat 프로그램을 넣으면 되겠군!'</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">라고 생각할 수 있지만, 그렇게 하면 위험하다.</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(255, 0, 127); font-family: Dotum, 돋움, sans-serif;">시스템에서 사용하는 폴더는 웬만해선 건들지 말자.</span></p><p><br></p><p>/usr/local 이라는 디렉토리에는 사용자가 '임의로' 만든 여러 프로그램 및&nbsp;</p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">/usr/local/bin 폴더에는 yrun, ystat, ytest, dstat 등이 들어가 있다. 이 파일명들은 그대로 사용자들이 명령어처럼 쓸 수 있다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">/usr/local/sbin 폴더는 root 권한자만 사용할 수 있는&nbsp;명령어가 들어가 있다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">bin과 sbin 폴더에 대해 정리하자면</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">첫 번째, /bin, /sbin 에는 리눅스 커널에서 기본 제공하는 명령어 셋이 들어 있다. 이 명령어들은 시스템에 관련된 명령어들이다. chmod, systemctl, ls, mkdir, mount&nbsp;등이 여기에 해당한다.</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">두 번째, /usr/bin, /usr/sbin 에는 사용자가 설치하거나 리눅스에서 설치한 애플리케이션들이 제공하는 명령어 셋이 들어 있다. python, cpp, gcc 등의 명령어가 여기에 해당한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">세 번째, /usr/local/bin, /usr/local/sbin 는 위 경우 외에 사용자가 임의로 만든 명령어 셋을 자유롭게 넣고 지울 수 있도록 만든 명령어 폴더.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># whereis ystat_daemon</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">ystat_daemon : /usr/local/sbin/ystat_daemon</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">또, 부팅시 자동시작되도록 만들기 위해서 /etc/rc.local 파일을 수정한다.</span></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"># vi /etc/rc.local</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">여기에 다음 내용을 추가한다.</span></p><hr style="display:block; border: black 0 none; border-top: black 1px solid; height: 1px"><p><span style="color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">. /lib/lsb/init-functions</span><br></p><p><br></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">log_begin_msg "ystat Monitoring DAEMON process starting.."</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">/usr/local/sbin/ystat_daemon</span></p><p><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">	</span><span style="font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">log_end_msg $?</span><span class="Apple-tab-span" style="white-space: pre; font-size: 10pt; color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif;">	</span></p><p><br></p><p><span style="color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif; font-size: 13.3333px;">exit 0</span></p><hr style="display:block; border: black 0 none; border-top: black 1px solid; height: 1px"><p><span style="color: rgb(0, 216, 255); font-family: Dotum, 돋움, sans-serif; font-size: 13.3333px;"></span><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">여기서 맨 윗줄과 아랫줄은 이미 rc.local 파일에 있으므로, 이 두 구문 사이에&nbsp;쓰면 된다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그리고 서버와 노드의 모든 /etc/rc.local 파일을 새로운 rc.local 파일로 덮어씌우면 된다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">그리고 ystat,yrun,ytest,dstat, ystat_daemon 을 chmod 755 해주면 됨.</span></p><p><span style="font-size: 10pt; color: rgb(232, 211, 192); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이 때 /root/.ystat 에 각 노드의 이름으로 스크립트 파일이 만들어지며,</span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;"><br></span></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">이를 vi 에디터로 읽어보면 각 노드의 정보가&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">정리되어 있음을 알 수 있다.</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">ystat 은 이 스크립트 파일을 읽어서 표시해줄 뿐이다.</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">그래서 ystat 명령어를 통해 나오는 정보를&nbsp;</span><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">수정하고 싶다면,</span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;"><br></span></p><p><span style="font-family: Dotum, 돋움, sans-serif; font-size: 10pt;">ystat 스크립트의 '읽는 방법' 부분을 수정해주면 된다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">다시 ystat 의 프로세스를 정리해보자.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">첫 번째, 모든 서버와 노드가 부팅될 시 /etc/rc.local 에 의해 ystat_daemon이 background 에서 자동으로 사용될 것.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">두 번째, ystat_daemon process 는 끝나지 않는 프로세스이므로, 모든 서버와 노드는 서버의 /root/.ystat/ 에 자신의 정보를 저장한다.</span></p><p><br></p><p><span style="font-size: 10pt; color: rgb(204, 204, 204); font-family: Dotum, 돋움, sans-serif;">세 번째, ystat 명령어는 /root/.ystat/y101 등의 파일을 모두 읽어서 출력시켜준다.&nbsp;</span></p><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/dstat" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">dstat</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/ystat_root" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">ystat_root</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/ystat_daemon_kill.py" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">ystat_daemon_kill.py</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/ystat_daemon" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">ystat_daemon</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/ystat" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">ystat</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/ystat_daemon_exec.py" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">ystat_daemon_exec.py</span>
            </div>
            <div class="size">0.0MB</div>
        </div>
    </a>
</figure>
                        </div>
                        <br/>
                        <div class="tags">
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
