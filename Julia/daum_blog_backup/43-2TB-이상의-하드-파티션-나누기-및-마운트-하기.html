
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>2TB 이상의 하드 파티션 나누기 및 마운트 하기</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">2TB 이상의 하드 파티션 나누기 및 마운트 하기</h2>
                                <div class="box-info">
                                    <p class="category">리눅스/리눅스 일반</p>
                                    <p class="date">2016-09-26 20:06:54</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><span style="font-size: 11pt; color: rgb(255, 255, 255);">하드는 기본적으로 MBR 이 포함된 32 bit PC-BIOS 파티션 테이블을 사용한다.</span></p><p><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">이 파티션 테이블은 2 TB 밖에 인식을 할 수 없다. 그래서 드라이브당 네 개의 주 파티션만 가질 수 있다.</span></p><p><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">fdisk 를 이용해서는 2 TB 가 한계인 것이다.&nbsp;</span></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">확장 파티션은 이런 주파티션을 4개 밖에 가질 수 없는 제한을 극복하기 위해 만</span><span style="font-size: 11pt; color: rgb(255, 255, 255);">들어진 방법이다.&nbsp;</span></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">최근에는 2 TB 파티션 용량 제한을 해결하기 위해 PC-BIOS 테이블을 GPT ( GUID 파티션테이블)로 대체하고 있다.</span><br><br><span style="font-size: 11pt; color: rgb(255, 255, 255);">기본적으로 리눅스 파티션은 msdos label 이다.</span></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">이건 2TB 이상을 사용할 수 없으므로(64 bit OS 라도) 새로운 파티션 형식인 gpt 를 이용해야 한다.</span></p><p><span style="font-size: 9pt;"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">fdisk 명령은 gpt를 지원하지 않으므로 사용할 수 없다.&nbsp;</span><br></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">새로운 명령어인 parted 는 gpt 를 지원한다. gpt를 다룰 수 있는 명령어 중엔 gdisk 라는 명령어도 있다.</span><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">16년 9월 26일, mediawiki 서버를 만들기 위해 5 TB 짜리 하드를 연결하였다. 리눅스는 1TB 하드에 설치하고,</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">/var/www/html/mediawiki 폴더를 5TB 하드와 연결시켜서 사용하려고 한다.</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><font color="#ffffff"><span style="font-size: 14.6667px;">parted 를 이용한 파티션 나누기 및 마운트 과정은 크게 3가지로 나뉜다.</span></font></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="color: rgb(255, 255, 255); font-size: 14.6667px;">라벨을 만들고,&nbsp;</span><span style="color: rgb(255, 255, 255); font-size: 14.6667px;">파티션을 만든다음, 마운트 시키는 작업이 끝이다.</span><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><font color="#ffffff"><span style="font-size: 14.6667px;">사용한 방법은 다음과 같다.</span></font></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"># parted</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">(parted) print</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">(parted) mklabel</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">New disk label type? gpt</span></p><p><font color="#ffffff"><span style="font-size: 14.6667px;">Warning: The existing disk label &#111;&#110; /dev/sda will be destroyed and all data &#111;&#110; this disk will be lost. Do you want to c<span style="font-size: 11pt; color: rgb(255, 255, 255);">ontinue?</span></span></font></p><p></p><p><font color="#ffffff"><span style="font-size: 11pt; color: rgb(255, 255, 255);">Yes/No? &nbsp; &nbsp; &nbsp; &nbsp;Yes</span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><span style="font-size: 11pt; color: rgb(255, 255, 255);">이러면 라벨이 만들어 진다. 5TB 이상의 하드의 라벨은 gpt 이므로</span><span style="font-size: 11pt; color: rgb(255, 255, 255);">&nbsp;그것으로 만든 것이다.&nbsp;</span></span></font></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">(parted) mkpart</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">Partition name? mediawiki</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">File system type? [ext2]? ext4</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">Start? 1</span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">End? 60%</span></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">여기서 1은 하드의 맨처음 위치를 말한다. 반면 -1은 하드의 맨 마지막을 말한다.</span></p><p><br></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);">나는 5TB의 처음부터 60%, 즉 3TB를 미디어 위키의 자료 공간으로, 60% 부터 100% 까지는 백업 공간으로 활용할 <span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">것이다.</span></span></p><p><span style="font-size: 11pt; color: rgb(255, 255, 255);"><br></span></p><p><font color="#ffffff"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">(parted) print</span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">잘 만들어진 파티션이 보일것. mediawiki 파티션은 /dev/sda1 이었다. 이걸로&nbsp;이제 마운트를 해보자.</span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">테스트를 위해 /mnt/5TBhard 폴더를 만들었다.</span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);"># mount -t ext4 /dev/sda1 /mnt/5TBhard</span></font></p><p><font color="#ffffff"><span style="font-size: 14.6667px;"><br></span></font></p><p><font color="#ffffff"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">읭?</span></font></p><p><span style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; white-space: inherit; font-size: 13px;"><br></span></p><p><span style="font-family: Dotum; white-space: inherit; font-size: 11pt; color: rgb(255, 255, 255);">mount: wrong fs type, bad option, bad superblock &#111;&#110; 192.168.1.5:/home/shared, missing codepage or helper program, or other error (for several filesystems (e.g. nfs, cifs) you might need a /sbin/mount.&lt;type&gt; helper program) &nbsp;</span></p><p><span style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; white-space: inherit; font-size: 13px;"><br></span></p><p><span style="font-family: Dotum; white-space: inherit; font-size: 11pt; color: rgb(255, 255, 255);">이런 에러가 뜨면서 안된다. superblock 때문에 안된 것.&nbsp;해결한 방법은 다음과 같다</span></p><p><span style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; white-space: inherit; font-size: 13px;"><br></span></p><p><span style="font-family: Dotum; white-space: inherit; font-size: 11pt; color: rgb(255, 255, 255);"># mkfs.ext4 /dev/sda1</span></p><p><span style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; white-space: inherit; font-size: 13px;"><br></span></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">파일 시스템을 쉘에서 다시 만들어줬다. 그랬더니 되더라...</span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 13px;"><br></span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">superblock 이 뭔지는 모르겠지만, 5 TB 하드에 데비안을 수없이 지웠다 깔면서 하드에 배드블록이라던지 무엇인가가 생긴거 같다. 쉘에서 다시 파일 시스템을 만들어 주고, /mnt/5TBhard에 마운트 되는 것을 다시 확인한 뒤&nbsp;/etc/fstab 을 수정하자.</span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 13px;"><br></span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">/etc/fstab 에 코드를 적용하고&nbsp;</span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 13px;"><br></span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);"># mount -a</span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 13px;"><br></span></font></p><p><font face="Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, sans-serif"><span style="font-size: 11pt; font-family: Dotum; color: rgb(255, 255, 255);">전부 마운트 해보자. 그리고 /var/www/html/mediawiki 로 들어가면 5TB 하드가 나오는지 확인하자.</span></font></p>
                        </div>
                        <br/>
                        <div class="tags">
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
